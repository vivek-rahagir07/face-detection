<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CognitoAttend</title>


    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cognitoattend.com/">
    <meta property="og:title" content="CognitoAttend | Next-Gen Biometric Attendance">
    <meta property="og:description"
        content="Professional face recognition attendance with 3D plexus HUD. Fast, secure, and mobile-ready.">
    <meta property="og:image" content="folder/cognito attend.png">


    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://cognitoattend.com/">
    <meta property="twitter:title" content="CognitoAttend | Biometric Attendance">
    <meta property="twitter:description"
        content="Professional face recognition attendance with 3D plexus HUD. Fast, secure, and mobile-ready.">
    <meta property="twitter:image" content="folder/cognito attend.png">


    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="folder/cognito attend.png">
    <meta name="msapplication-TileColor" content="#000000">


    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://prod.spline.design">
    <link rel="preload" href="folder/cognito attend.png" as="image">
    <link rel="preload" href="folder/hacker2.png" as="image">


    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">


    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>


    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>


    <script defer src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>


    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.34/build/spline-viewer.js"></script>


    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "CognitoAttend",
      "operatingSystem": "Web",
      "applicationCategory": "BusinessApplication",
      "description": "Biometric face recognition attendance management system.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
    <style>
        /* QR Expired Overlay */
        .qr-wrapper {
            position: relative;
        }

        #qr-expired-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--danger);
            font-weight: 800;
            font-size: 1.5rem;
            z-index: 10;
            border-radius: 12px;
            backdrop-filter: blur(4px);
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            border: 2px solid var(--danger);
        }

        .hidden {
            display: none !important;
        }

        #btn-refresh-qr {
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 5px var(--accent);
            }

            50% {
                box-shadow: 0 0 20px var(--accent);
            }

            100% {
                box-shadow: 0 0 5px var(--accent);
            }
        }
    </style>
</head>

<body>
    <!-- Atmospheric Aura Blobs -->
    <div class="aura-container" aria-hidden="true">
        <div class="aura-blob aura-1"></div>
        <div class="aura-blob aura-2"></div>
        <div class="aura-blob aura-3"></div>
    </div>

    <!-- Biometric Preloader -->
    <div id="preloader">
        <div class="bio-scanner">
            <div class="bio-fingerprint"></div>
            <div class="bio-scan-line"></div>
        </div>
        <div class="bio-text">Scanning</div>
        <div class="bio-status">Initializing CognitoAttend...</div>
    </div>

    <script>
        (function () {
            const preloader = document.getElementById('preloader');
            const startTime = Date.now();
            const minTime = 3000;

            function hide() {
                const elapsed = Date.now() - startTime;
                const remaining = Math.max(0, minTime - elapsed);
                setTimeout(() => {
                    if (preloader) {
                        preloader.classList.add('fade-out');
                        setTimeout(() => preloader.style.display = 'none', 800);
                    }
                }, remaining);
            }

            if (document.readyState === 'complete') hide();
            else window.addEventListener('load', hide);

            // Fallback for local testing/CORS issues
            setTimeout(hide, 5000);
        })();
    </script>

    <!-- Portal -->
    <div id="view-portal" class="portal-container splash-active">
        <div class="portal-spline">
            <spline-viewer url="https://prod.spline.design/DMDhURqSqdDj2ohd/scene.splinecode"></spline-viewer>
            <div class="spline-watermark-cover"></div>
        </div>


        <div class="portal-card mobile-hidden">
            <div class="logo-wrapper">
                <img src="folder/hacker2.png" alt="Hacker Logo" class="card-logo" loading="eager">
            </div>
            <h1>CognitoAttend</h1>
            <p>Select your workspace to continue</p>

            <div class="portal-tabs">
                <button id="tab-join" class="portal-tab active">Join Workspace</button>
                <button id="tab-create" class="portal-tab">Create New</button>
            </div>

            <!-- Join -->
            <div id="form-join" class="portal-form">
                <div class="form-group">
                    <label for="portal-join-name" class="sr-only">Workspace Name</label>
                    <input type="text" id="portal-join-name" placeholder="Workspace Name (e.g. Savera)"
                        aria-label="Workspace Name">
                    <label for="portal-join-pass" class="sr-only">Workspace Password</label>
                    <input type="password" id="portal-join-pass" placeholder="Workspace Password"
                        aria-label="Workspace Password">
                    <button id="btn-portal-join" class="btn-primary">Enter Workspace</button>
                </div>
            </div>

            <!-- Create -->
            <div id="form-create" class="portal-form hidden">
                <div class="form-group">
                    <label for="portal-create-name" class="sr-only">New Workspace Name</label>
                    <input type="text" id="portal-create-name" placeholder="New Workspace Name"
                        aria-label="New Workspace Name">
                    <label for="portal-create-pass" class="sr-only">Set Workspace Password</label>
                    <input type="password" id="portal-create-pass" placeholder="Set Workspace Password"
                        aria-label="Set Workspace Password">
                    <button id="btn-portal-create" class="btn-primary">Initialize & Enter</button>
                </div>
            </div>

            <small id="portal-error"
                style="color: var(--danger); text-align: center; display: block; margin-top: 10px;"></small>
        </div>

        <!-- Mobile Splash View -->
        <div id="portal-mobile-start" class="mobile-only">
            <div class="mobile-welcome-text">
                <h2>Welcome to</h2>
                <h1>CognitoAttend</h1>
                <p>Advanced Biometric Access</p>
            </div>
            <button id="btn-portal-continue" class="btn-primary">Get Started ‚ûî</button>
        </div>
    </div>

    <!-- Operation -->
    <div id="view-operation" class="operation-container hidden">
        <div class="operation-header">
            <button id="btn-exit-workspace" class="btn-secondary btn-sm" aria-label="Exit Workspace">üö™ Exit
                Workspace</button>
            <button id="btn-mobile-menu" class="btn-secondary btn-sm mobile-only" aria-label="Open Mobile Menu">‚ò∞
                Menu</button>
            <button id="btn-qr-presence" class="btn-primary btn-sm mobile-hidden"
                style="background: var(--accent); color: #000;" aria-label="Open QR Presence">üì±
                QR Presence</button>
            <h2 id="current-space-title">Workspace Name</h2>
            <div style="display: flex; gap: 8px; align-items: center;" class="mobile-hidden">
                <button id="btn-history" class="btn-secondary btn-sm" aria-label="Open History">üìú
                    History</button>
            </div>
            <div id="system-status" class="status-badge status-loading" aria-live="polite">Initializing System...</div>
        </div>

        <!-- Mobile Side Navigation -->
        <div id="mobile-sidebar" class="sidebar-container hidden" role="navigation" aria-label="Mobile Navigation">
            <div class="sidebar-header">
                <h3>Menu</h3>
                <button id="btn-close-sidebar" class="btn-close-sm" aria-label="Close Sidebar">&times;</button>
            </div>
            <div class="sidebar-content">
                <div class="sidebar-section">
                    <h4>Navigation</h4>
                    <button class="nav-item active" data-mode="attend">üïí Attendance Monitor</button>
                    <button class="nav-item" data-mode="reg">üë§ Student Registration</button>
                    <button class="nav-item" data-mode="analytics">üë• Analytics & Logs</button>
                    <button class="nav-item" data-mode="config">‚öôÔ∏è System Config</button>
                </div>
                <div class="sidebar-section">
                    <h4>Actions</h4>
                    <button id="side-btn-qr" class="nav-item">üì± QR Presence</button>
                    <button id="side-btn-history" class="nav-item">üìú History</button>
                    <button id="side-btn-export" class="nav-item">üì• Export CSV</button>
                </div>
            </div>
        </div>

        <div class="main-container">
            <div class="camera-wrapper" aria-label="Camera Feed Section">
                <div id="face-3d-container" aria-hidden="true"></div>
                <video id="video" autoplay muted playsinline aria-label="Live Camera Stream"></video>

                <div class="camera-viewfinder">
                    <div class="viewfinder-corner top-left"></div>
                    <div class="viewfinder-corner top-right"></div>
                    <div class="viewfinder-corner bottom-left"></div>
                    <div class="viewfinder-corner bottom-right"></div>

                    <div class="viewfinder-ui top-row">
                        <div class="rec-box">
                            <span class="rec-dot"></span>
                            <span>REC</span>
                        </div>
                        <div class="viewfinder-timer">00:00:00</div>
                        <div class="battery-box">
                            <div class="battery-icon">
                                <div class="battery-level"></div>
                            </div>
                        </div>
                    </div>

                    <div class="viewfinder-ui bottom-row">
                        <button id="btn-toggle-camera" class="cam-toggle-btn" title="Toggle Camera">
                            <span class="cam-icon">üì∑</span>
                            <span class="cam-status-text">CAMERA ON</span>
                        </button>
                    </div>
                </div>
                <div id="camera-offline-overlay" class="hidden">
                    <div class="offline-content">
                        <div class="offline-icon">üì∑</div>
                        <h3>Camera Offline</h3>
                        <p>Turn on to resume biometric scan</p>
                        <button id="btn-restart-camera" class="btn-primary btn-sm">Turn Camera ON</button>
                    </div>
                </div>
                <canvas id="overlay"></canvas>
                <div id="loading-overlay" class="loading-screen">
                    <div class="spinner"></div>
                    <h3 id="loading-text">Loading AI Models...</h3>
                    <p>Securing camera feed & biometric links</p>
                </div>
                <div id="scan-indicator"
                    style="display: none; position: absolute; top: 20px; left: 20px; background: rgba(0, 242, 255, 0.8); color: black; padding: 5px 12px; border-radius: 20px; font-weight: 800; font-size: 0.7rem; z-index: 10; animation: blink 1s infinite;">
                    üõ∞Ô∏è SCANNING</div>
            </div>

            <div class="controls-panel">

                <div class="stats-container">
                    <div class="stat-box">
                        <div class="stat-label">Date</div>
                        <div style="font-weight: 600;" id="display-date">--/--</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="today-count">0</div>
                        <div class="stat-label">Students Present</div>
                    </div>
                </div>


                <div class="mode-toggle">
                    <button id="btn-mode-attend" class="btn-secondary active" title="Attendance Monitor"><span>üïí</span>
                        Attend</button>
                    <button id="btn-mode-reg" class="btn-secondary" title="Student Registration"><span>üë§</span>
                        Reg</button>
                    <button id="btn-mode-analytics" class="btn-secondary" title="Analytics & Logs"><span>üë•</span>
                        Logs</button>
                    <button id="btn-mode-config" class="btn-secondary" title="Configuration"><span>‚öôÔ∏è</span>
                        Config</button>
                </div>


                <div id="config-form" class="form-group hidden">
                    <h3>Configure Fields</h3>
                    <p style="font-size: 0.8rem; color: var(--text-muted);">Choose what info to collect during
                        registration
                    </p>
                    <div class="toggle-group">
                        <label><input type="checkbox" class="field-toggle" data-field="regNo" checked> Registration
                            Number</label>
                        <label><input type="checkbox" class="field-toggle" data-field="course" checked> Course /
                            Dept</label>
                        <label><input type="checkbox" class="field-toggle" data-field="email"> Email ID</label>
                        <label><input type="checkbox" class="field-toggle" data-field="phone"> Phone Number</label>
                        <label><input type="checkbox" class="field-toggle" data-field="voiceEnabled" checked> Voice
                            Announcements</label>
                        <label><input type="checkbox" class="field-toggle" data-field="biometricEnabled" checked>
                            Biometric Fingerprint Security</label>
                    </div>

                    <h3 style="margin-top: 15px;">Geofencing Settings</h3>
                    <div class="form-group"
                        style="background: rgba(255,255,255,0.02); padding: 15px; border-radius: 12px; border: 1px solid var(--border);">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="config-geo-enabled"> Enable Geofencing
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; margin-top: 10px;">
                            <input type="checkbox" id="config-exam-mode"> Enable Exam Mode (Stricter AI)
                        </label>
                        <div style="display: flex; gap: 8px; margin-top: 10px;">
                            <input type="number" id="config-geo-radius" placeholder="Radius (meters)" style="flex: 1;"
                                value="100">
                            <button id="btn-set-location" class="btn-secondary btn-sm" style="white-space: nowrap;">üìç
                                Set
                                Loc</button>
                        </div>
                        <small id="geo-status"
                            style="display: block; margin-top: 8px; font-size: 0.7rem; color: var(--text-muted);">Local:
                            Not
                            set</small>

                        <!-- Map Preview for Setting Location -->
                        <div id="config-map-container"
                            style="width: 100%; height: 180px; border-radius: 12px; margin-top: 15px; border: 1px solid rgba(0, 242, 255, 0.2); overflow: hidden; display: none; position: relative;">
                            <div id="config-map" style="width: 100%; height: 100%;"></div>
                            <div class="map-hud-overlay"
                                style="position: absolute; inset: 0; pointer-events: none; background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15) 0px, rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px); background-size: 100% 2px; z-index: 1000; opacity: 0.3;">
                            </div>
                        </div>
                    </div>

                    <h3 style="margin-top: 15px;">Fleet Link Activation</h3>
                    <div class="form-group"
                        style="background: rgba(255,255,255,0.02); padding: 15px; border-radius: 12px; border: 1px solid var(--border);">
                        <div style="display: flex; gap: 8px;">
                            <button id="btn-generate-magic" class="btn-secondary btn-sm" style="flex: 1;">üîó Magic
                                Link</button>
                            <button id="btn-project-magic" class="btn-secondary btn-sm"
                                style="flex: 1; background: var(--accent); color: black; border: none;">üñ•Ô∏è Project
                                QR</button>
                        </div>
                        <div id="magic-link-container" class="hidden" style="margin-top: 10px;">
                            <input type="text" id="magic-link-input" readonly style="font-size: 0.7rem; padding: 8px;">
                            <button id="btn-copy-magic" class="btn-sm"
                                style="margin-top: 5px; width: 100%; height: 30px; font-size: 0.7rem; background: var(--accent); color: black; border: none; border-radius: 5px;">Copy
                                Link</button>
                        </div>
                    </div>

                    <button id="btn-save-config" class="btn-primary" style="margin-top: 10px;">Save Settings</button>
                    <h3 style="margin-top: 15px;">QR Scanner Settings</h3>
                    <div class="form-group"
                        style="background: rgba(255,255,255,0.02); padding: 15px; border-radius: 12px; border: 1px solid var(--border);">
                        <label for="config-qr-refresh">QR Refresh Interval</label>
                        <select id="config-qr-refresh"
                            style="width: 100%; background: #111; border: 1px solid rgba(255, 255, 255, 0.1); padding: 12px; border-radius: 12px; color: #fff; margin-top: 8px;">
                            <option value="30000">30 Seconds</option>
                            <option value="60000">1 Minute</option>
                            <option value="120000">2 Minutes</option>
                            <option value="300000">5 Minutes</option>
                        </select>
                    </div>
                </div>




                <div id="reg-form" class="form-group hidden">
                    <h3>Register New Person</h3>
                    <div id="dynamic-fields-container"></div>
                    <div class="registration-actions">
                        <button id="btn-capture" class="btn-primary">üì∏ Capture & Register</button>
                        <button id="btn-upload-trigger" class="btn-secondary">üñºÔ∏è Upload from Gallery</button>
                        <input type="file" id="input-upload-photo" accept="image/*" class="hidden">
                    </div>
                    <div id="reg-feedback"
                        style="margin-top: 10px; font-size: 0.85rem; text-align: center; min-height: 20px;"></div>
                </div>


                <div id="attend-info">
                    <div style="margin-bottom: 15px;">
                        <div class="list-header">
                            <div style="display: flex; gap: 10px;">
                                <span id="tab-present" class="attendance-tab active">Present</span>
                                <span id="tab-absent" class="attendance-tab">Absent</span>
                            </div>
                            <div style="display: flex; gap: 6px;">
                                <button id="btn-export" class="btn-export">üìä CSV</button>
                                <button id="btn-export-pdf" class="btn-export">üìÑ PDF</button>
                            </div>
                        </div>
                        <div class="scrollable-list" id="today-list">
                            <div style="padding:10px; text-align:center; color:#888;">No attendance yet</div>
                        </div>
                    </div>
                    <div>
                        <div class="list-header"><span>‚ö° Live Activity</span></div>
                        <div class="scrollable-list" id="live-logs" style="max-height: 120px;"></div>
                    </div>
                </div>


                <div id="analytics-panel" class="hidden">
                    <div class="list-header"><span>üë• People Stats</span></div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <input type="text" id="people-search" placeholder="Search people...">
                    </div>
                    <div id="people-list-container" class="scrollable-list" style="max-height: 350px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="qr-modal" class="qr-modal-container hidden" role="dialog" aria-labelledby="qr-modal-title">


        <div class="qr-modal-content">
            <button id="btn-close-qr" class="btn-close" aria-label="Close QR Modal">&times;</button>
            <h3 id="qr-modal-title">QR Presence</h3>
            <p>Scan to mark attendance. Refreshes in <span id="qr-timer">30</span>s</p>
            <div class="qr-wrapper">
                <img id="qr-image" src="" alt="Dynamic QR Code for Attendance">
                <div class="qr-logo-overlay">
                    <img src="folder/cognito attend.png" alt="CognitoAttend Brand Logo" loading="lazy">
                </div>
                <div class="qr-scanner-line" aria-hidden="true"></div>
                <div id="qr-expired-overlay" class="hidden">QR EXPIRED</div>
            </div>
            <div id="qr-scans-display"
                style="margin-top: 10px; font-size: 0.9rem; color: var(--accent); font-weight: 800;">
                Scans: <span id="qr-scan-count">0</span>
            </div>
            <div id="qr-status" class="qr-status">Generating code...</div>
            <button id="btn-refresh-qr" class="btn-primary hidden"
                style="margin-top: 15px; width: 100%; height: 45px; font-weight: 700;">üîÑ Generate New QR</button>
            <button id="btn-copy-qr-link" class="btn-secondary btn-sm"
                style="margin-top: 15px; width: 100%; border: 1px solid rgba(255,255,255,0.1);">üîó Copy Attendance
                Link</button>
        </div>
    </div>

    <!-- History Modal -->
    <div id="history-modal" class="qr-modal-container hidden" role="dialog" aria-labelledby="history-modal-title">
        <div class="qr-modal-content" style="max-width: 800px; width: 95%;">
            <button id="btn-close-history" class="btn-close" aria-label="Close History Modal">&times;</button>
            <h3 id="history-modal-title">Attendance History</h3>

            <div id="history-date-selector"
                style="margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                <!-- Dates will be injected here -->
            </div>

            <div style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center;">
                <input type="text" id="history-search" placeholder="Search by name, reg no..."
                    style="flex: 1; margin: 0;">
                <div style="display: flex; gap: 6px;">
                    <button id="btn-export-history" class="btn-export" style="height: 45px; display: none;">üìä
                        CSV</button>
                    <button id="btn-export-history-pdf" class="btn-export" style="height: 45px; display: none;">üìÑ
                        PDF</button>
                </div>
            </div>

            <div id="history-table-container" class="scrollable-list"
                style="max-height: 400px; border: 1px solid rgba(0, 242, 255, 0.2);">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Reg No</th>
                            <th>Course</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="history-table-body">
                        <!-- Data will be injected here -->
                    </tbody>
                </table>
            </div>
            <div id="history-status" class="qr-status">Select a date to view attendance</div>
        </div>
    </div>

    <!-- Edit Person Modal -->
    <div id="edit-modal" class="qr-modal-container hidden" role="dialog" aria-labelledby="edit-modal-title">
        <div class="qr-modal-content">
            <button id="btn-close-edit" class="btn-close" aria-label="Close Edit Modal">&times;</button>
            <h3 id="edit-modal-title">Edit Discovery</h3>
            <p>Update information for <span id="edit-person-name-title">Person</span></p>
            <div class="form-group" style="margin-top: 20px;">
                <input type="text" id="edit-name" placeholder="Full Name">
                <input type="text" id="edit-regNo" placeholder="Registration Number">
                <input type="text" id="edit-course" placeholder="Course / Department">
                <button id="btn-save-edit" class="btn-primary">Save Changes</button>
                <button id="btn-delete-person" class="btn-secondary"
                    style="color: var(--danger); border-color: var(--danger);">Delete Record</button>
            </div>
        </div>
    </div>


    <div id="confirm-modal" class="qr-modal-container hidden" style="z-index: 10001;">
        <div class="qr-modal-content" style="max-width: 350px;">
            <div style="font-size: 2.5rem; color: var(--danger); margin-bottom: 15px;">‚ö†</div>
            <h3>Critical Action</h3>
            <p id="confirm-message">Are you sure you want to proceed?</p>
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button id="btn-confirm-yes" class="btn-primary" style="background: var(--danger); flex: 1;">Yes,
                    Delete</button>
                <button id="btn-confirm-no" class="btn-secondary" style="flex: 1;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Magic QR Modal -->
    <div id="magic-qr-modal" class="qr-modal-container hidden" role="dialog" aria-labelledby="magic-qr-title">
        <div class="qr-modal-content" style="max-width: 500px; padding: 40px;">
            <button id="btn-close-magic-qr" class="btn-close" aria-label="Close Magic QR">&times;</button>
            <h2 id="magic-qr-title"
                style="font-weight: 800; font-size: 1.8rem; margin-bottom: 5px; color: var(--accent);">SCAN TO REGISTER
            </h2>
            <p style="color: #888; margin-bottom: 25px;">Registrations are live. Scan this code to join <span
                    id="magic-qr-space-name" style="color: #fff; font-weight: 700;">Workspace</span></p>

            <div class="qr-wrapper"
                style="width: 300px; height: 300px; margin: 0 auto; border: 8px solid rgba(0, 242, 255, 0.2); padding: 10px; background: #fff; border-radius: 24px; box-shadow: 0 0 50px rgba(0, 242, 255, 0.2);">
                <img id="magic-qr-image" src="" alt="Magic Registration QR Code"
                    style="width: 100%; height: 100%; display: block;">
                <div class="qr-scanner-line" style="background: var(--accent); opacity: 0.5;"></div>
            </div>

            <div
                style="margin-top: 30px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <div
                    style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: #888; margin-bottom: 5px;">
                    Link Expires In</div>
                <div id="magic-qr-timer"
                    style="font-family: 'JetBrains Mono', monospace; font-size: 2rem; font-weight: 700; color: var(--accent);">
                    05:00</div>
            </div>

            <p style="margin-top: 20px; font-size: 0.85rem; color: #666;">This portal is secured by CognitoAttend
                Biometric HUD</p>
        </div>
    </div>

    <!-- Profile Popup Modal -->
    <div id="profile-modal" class="qr-modal-container hidden" role="dialog" aria-labelledby="profile-name">
        <div class="qr-modal-content profile-modal-content">
            <button id="btn-close-profile" class="btn-close" aria-label="Close Profile">&times;</button>

            <div class="profile-header">
                <div class="profile-photo-container">
                    <img id="profile-photo" src="" alt="Profile Photo" class="profile-photo-large">
                    <div id="profile-photo-placeholder" class="profile-photo-placeholder-large hidden"></div>
                </div>
                <h2 id="profile-name">Student Name</h2>
                <div class="profile-badges">
                    <span id="profile-regNo" class="badge-reg">REG_0000</span>
                    <span id="profile-course" class="badge-dept">COURSE_NAME</span>
                </div>
            </div>

            <div class="profile-history-section">
                <h3>Attendance History</h3>
                <div id="profile-history-list" class="scrollable-list profile-history-list">
                    <!-- History items will be injected here -->
                </div>
                <div id="profile-history-status" class="qr-status">Loading history...</div>
            </div>
        </div>
    </div>

    <!-- Digital ID Card Modal -->
    <div id="id-card-modal" class="qr-modal-container hidden" role="dialog" aria-labelledby="id-card-title">
        <div class="id-card-modal-content">
            <button id="btn-close-id-card" class="btn-close" aria-label="Close ID Card">&times;</button>
            <div class="id-card-perspective">
                <div id="id-card-scene" class="id-card-flipper">
                    <!-- Front Face -->
                    <div class="id-card-face id-card-front">
                        <div class="id-card-hologram"></div>
                        <div class="id-card-inner">
                            <div class="id-card-header">
                                <img src="folder/cognito attend.png" alt="Logo" class="id-card-logo">
                                <div class="id-card-chip"></div>
                            </div>
                            <div class="id-card-body">
                                <div class="id-card-photo-wrapper">
                                    <img id="id-card-photo" src="" alt="Student Photo">
                                    <div class="id-card-photo-scanner"></div>
                                </div>
                                <div class="id-card-info">
                                    <h2 id="id-card-name">Student Name</h2>
                                    <p id="id-card-reg">REG_0000</p>
                                    <div class="id-card-meta">
                                        <span id="id-card-course">COURSE_NAME</span>
                                    </div>
                                </div>
                            </div>
                            <div class="id-card-footer">
                                <div class="id-card-auth-seal">VERIFIED</div>
                                <div class="id-card-barcode"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Back Face -->
                    <div class="id-card-face id-card-back">
                        <div class="id-card-inner">
                            <div class="id-card-back-content">
                                <h3>DIGITAL ACCESS KEY</h3>
                                <div id="id-card-qr" class="id-card-qr-container"></div>
                                <p>This digital identity is secured by CognitoAttend Biometric HUD. Valid for 24h.</p>
                                <div class="id-card-back-footer">
                                    <span>AUTHORIZED PERSONNEL ONLY</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="id-card-actions">
                <p class="id-card-hint">Tap card to flip view</p>
                <button id="btn-save-wallet" class="btn-primary"
                    style="width: 100%; background: var(--accent); color: #000; border: none;">üí≥ Save to Digital
                    Wallet</button>
            </div>
        </div>
    </div>

    <div id="toast-container"
        style="position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 10002; display: flex; flex-direction: column; gap: 10px; pointer-events: none;">
    </div>
    </div>


    <script type="module" src="main.js?v=master_matrix_v2"></script>
    <div style="position: fixed; bottom: 5px; right: 5px; font-size: 10px; color: #333; pointer-events: none;">v.1925
    </div>

    <div class="bottom-strip" role="contentinfo">

        <div class="footer-center">
            <img src="folder/cognito attend.png" alt="CognitoAttend Global Logo" class="footer-brand-logo"
                loading="lazy">
            <span class="footer-brand-name">CognitoAttend</span>
        </div>
    </div>
</body>